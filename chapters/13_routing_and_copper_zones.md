# Routing and Copper Zones



various voltages that we'll be using including 3.3 volts 5 volts and there's a few other net for example the three bus Nets that I create copper zones for after that I'll focus on the differential pairs then I'll go for clock and highs speeded signals so that means the SBI interface and the I squid C interface and anything that is connected to those interfaces and then I'm going to work on power traces so anything that conveys power that is not already connected to a copper Zone and finally the various other signals that

are left I finish all that work I will be doing an optimization one thing that people often do at this point is to use the auto router to take care of the routing in literally just a few minutes but for a board like this I find that the auto router produces of course Resorts that validate through the error Checker but they're not optimal and that can lead to problems with signal conditioning or than you having to spend time to fix what the auto router has done instead of doing the work from the beginning on your own and producing a

much higher quality result so I'm going to skip the autorouter and I'm going to go straight into manual routing the first thing that I'll do is to create some copper zones and I will start with the simplest one which is the copper zone for the ground level I've decided to place that in the second inner copper layer so I've selected into.

cuu or in Copper from the appearance layers menu and I'm going to now go ahead and use this tool draw field zones and I'm going to draw an outline in a moment so I've got in I need to configure it first I want to connect this Zone to the ground level and I'm going to call it gnd so zones now can have names the rest of the items here look fine as they are and uh is going to be a solid fi I find solid Fields perform better than the option here is a hatch pattern so go for solid fi click okay and then continue to draw and your drawing doesn't need to be that

detailed in this case all you've got to do is to enclose the area of the board where you want the copper Zone to be filled then because of the board outline kicker is going to ensure that the zone is fully paint within the board so I'm just going to save that and I'm going to fill the Zone just right click Zone F and now you can see it designed and pretty much implemented so this isn't the inner second copper layer let's continue with the first inner copper layer now just going to click on this button to make the filling

disappear so that the board is still readable I just notice actually this I'm going to lock this group like that now if you're wondering just before I continue uh it's okay for these test points to be out here because as I said I don't know exactly where I'm going to put them yet until I start doing the routing so that's why I've got them out here for the time being so I'm now working the first inner copper layer going to start with the biggest 3.

3 volt copper Zone which is the one that supplies power everything it encloses the connectors up here the sensors the es32 itself and the 3.3 Vol regulator and also part of the USB circuitry like here I'm going to draw the 3.3 volt copper Zone to enclose these components there's two more zones down here there's one around here for the battery which is going to be the plus 5 USB copper Zone and one more around here which is the vbus copper zone so those are going to be much smaller so I'm going to start with the 3.3 volt First grab the tool

for the Zone start designing so around here this is inner one copper layer and 3.3 volt connector to so I'm going to name this 3.3 volts and the rest are fine as they are right so now it need to be a little bit more careful about how to draw this so I'm going to go up to around  here continue this includes this area here it includes the buttons and it includes the R32 so I'm going to go inwards like that towards left and after that I'm just going to move in a bit broader terms to finish the drawing because everything

else at that point is going to be 3.3 volts let's fill all zones take a look and click on that button to be able to see it going to uncheck everything else I'm going to uncheck into copper zone so we can see the 3.3 volt Zone that I just created right looks good now I'm going to focus here because I'm going to have a 5 volt for the USB right there dedicated and then a smaller one around here for the VB let's do the vs first so I want the vs Zone to convey the VBS level from these pins is B4 A9 A4 and those pens up here number five

pen number one Etc and number one from the fuse so this is going to look like this let's pick up the tool again start here there going to be vbus I'm just going to use a filter for this so vbus also going to call that VBS and start drawing and see part of the polyfuse is under VBS and the other part is not let's go like that going to go up this way because I don't want C1 to be enclosed and close it right there and as I was doing that I just noticed that this actually C1 needs to be flipped around because I need to connect pin one of C1

to A9 so I'm going to ungroup and then unlock this specific component and then rotate it like this group these two together again and lock it all right so let's fill this Zone and have a look all right so that's what it looks like and the final Zone that I want to create here is in the battery circuitry and this is going to be the 5V USB bus so take the copper tool this is going to enclose everything just going to create a out of this this is 5V USB and I'm going to call it plus 5 V USB and the drawing as a big

box and I want to enclose this part of the polyfuse because as you can see that's on the 5vt net okay let's refill you can just type B to do the refill all right cool that's done I'm going to continue on the front copper layer now because there's a few zones that I'd like to create here these also some tricks that you can use in order to connect pads that are in the front copper layer with zones or tracks that are in a different layer so for example notice this pad here this bus is very important because this is the bus that

provides power from the battery to power all of the components in the circuit so you need to make sure that there's plenty of copper to provide enough capacity for whatever current is needed to flow through so I could do this in a couple of ways one way would be to just have a single wire and and then put a VR here and then connect it as you can see to the 5vt layer and K it did that automatically because it knows what net I'm using and where this Nets need needs to connect to so it connected it automatically to the 5 volt USB net in a

copper layer but now you only have like a a small tiny essentially copper track and this track it's only 25 mm it's probably barely enough to convey the enough current to power the entire circuit another way to do this is to use copper zones so here's what I'll do instead now let me show you how we can connect a pad on the top copper layer with a copper Zone in one of the other inner layers in this case I've got a poly fuse and I've got an inner layer that I want to connect to you can see that the green zone is the one I want to

connect to I'm going to start with the vs going to use vs to do the actual connection so I'm going to start with the vs and then create a Zone to enclose those vs on the top layer uh one thing to do is because we're talking about power here I have selected a larger vs size 0.5 diameter and 0.

3 mimet for the hole let's pick the vs tool first and let's drop the first VR here one more here and one more here so I'm going for three vs in this case and each one is going to do its bit to convey power I'll move all three up a little for symmetry like that I can even go a little bit closer next I'm going to pick the Zone tool and start drawing so around here I'll connect that to the 5vt USB net and give it a name so it's going to be 5 Vol bus top there maybe more of these but I'll use numericals then instead of thermal reliefs I'm just

going to go for solid and start drawing here and close the pad completely and close type the b key and fill it up and now you can see that there is a really nice connection between this pad and the 5V USB Zone in the inner one copper layer I'm going to continue and do the same thing on the other side for vbus done next up I am going to work with copper Z zones around here to connect the ground pad of ace of J2 to the ground Zone in the second in a copper layer and then I'm going to create a couple of copper zones for U1 one is

going to be for vbat and the other one is going to be for ground again so let's start with the ground pad for J2 and I'm going to use the same technique first I'm going to select the front copper layer because that's where I'm going to create these new zones and continue with the pads first pad again I'm going to go for 0.5 and 0.

3 because uh I want these to be quite beefy all right if in in your case the vs that you create are not connected to the appropriate Zone all you have to do is to select them and then through the properties connected to the appropriate net Zone like that so now that I've got that done I'm going to create a zone so let's let's start say around here this going to go to ground and I'll call it gnd D J2 solid pad connection and just enclose part of the pad and the ground vs all right b key to redraw looks good okay next I'm going to create a new zone

right right here that zone will enclose pads 15 and 16 it's because I want to then use a large track to connect vbat which is pin 2 on S2 with the zone that combin pads 15 and 16 of U1 because there's going to be a lot of current flowing through this single track to power all of the components on the board so I'm going to make it very big as big as I can let's go and do that I'm still in the front copper layer take the zone and start drawing here I want this to be connected to vbat and I call it vbat top one solid feel make it big

yeah so that's the Zone created and just so to show you what I mean by connecting this pad to this zone I'm going to go ahead and do that now I'm going to type the X key and start drawing and connect it like this so front copper layer for some okay I need to type the b key to make sure that the connection does apply and have a look at the Zone all right just notice that I've got pad 14 as well that needs to be connected so I'm going to Simply extend the zone to include pad 14 I can select again so let's go to

the search  panel vat all right so I want to extend that a little higher to include 14 and 16 all right let's  redraw right for some reason Pat 16 is not included and I'm thinking this has to do with the clearances I'm going to make the clearance a little smaller 0.2 and see if that helps oh yeah it did okay so that was a problem here all right so I'm going to um repeat the drawing just to finish it up properly this time so XK to connect done all right and one thing that I'm going to to double check as well again one more time

is to make sure that this zone is assigned to the correct Place yeah vad all right let's continue so I'm going to create one more Zone to enclose or to combine these two pads together the two ground pads that's ground and I'm going to use a VR to connect that pad with ground so it goes to the ground net done draw just notice there's one more Zone to connect here and that's the 5 volt again two pads to combine together and I'm going to have a track coming out of that let's view it yeah this better one thing that thing I've forgot to do was

to give this Zone a name or did I yeah I don't think I did this should be g& D top one right g& d top one yes okay I'm going to move up there's a ground copper Zone in the regulator set of components that I want to to create so here's a regulator you can see there's 1 2 3 and four ground pads that need to be all connected through to the ground Zone in the you know two cober layer so let's do that front copper layer let's pick the Zone tool so let's start drawing I'm going to create a zone that encompasses these

pads it's going to be connected to the g& net and I'm going to call that top two all right so start drawing like this done and now to make the connection to the Copper Zone in the second inner copper layer I'm just going to use a bunch of vs problem I can now select them all and change the net to gnd D all right so draw they look a little ugly so I'm just going to align them better together that's enough let's save don't lose any work next copper Zone to create is this one here so that's pad four of VR1 and I must create a copper Zone to

provide a low impendence path to the 3.3 volt copper Zone in the inner one copper layer remind you this one here so let's create uh actually before creating the zone I'm just going to drop the vs let's put a bunch of vs here like this and all of them should be connected to the 3.3 volt zone I'll align them to top and I will distribute them nicely horizontally with even gaps and now let's switch to the zone I'll start from up here and that's going to be 3.

3 volt I'll call it 3.3 volt top one and and close them done and I think that's it with the zones so you can see the zones that I've created down here in the search panel under the zones Tab and I think that's it I'm I may need to of course create one or two more as needed as I'm doing the actual routing but I think for now it's good enough so I can then continue with the differential pairs followed by the clock and high speeed signal traces let's continue with the differential pairs on this board there are two differential pairs to Route the first
